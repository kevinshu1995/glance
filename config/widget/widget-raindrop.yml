- type: custom-api
  title: RAINDROP DASHBOARD
  cache: 5m
  url: https://api.raindrop.io/rest/v1/filters/0
  headers:
      Authorization: Bearer ${RAINDROP_TOKEN}
  template: |
      {{ $view_type := "cards" }} {{/* Options: "cards" or "list" */}}
      {{ $show_tags := true }}  {{/* Note: .Parameters.show_tags not working in template, using hardcoded value */}}
      {{ $show_conten_types := false }}
      {{ if eq $view_type "cards" }}
        <div class="grid grid-cols-2 gap-4">
          <!-- Stats Cards -->
          <div class="card">
            <div class="card-body">
              <h4 class="size-h4">Important</h4>
              <p class="size-h2 color-primary">{{ .JSON.Int "important.count" }}</p>
            </div>
          </div>
          <div class="card">
            <div class="card-body">
              <h4 class="size-h4">Broken Links</h4>
              <p class="size-h2 color-negative">{{ .JSON.Int "broken.count" }}</p>
            </div>
          </div>
          <div class="card">
            <div class="card-body">
              <h4 class="size-h4">Duplicates</h4>
              <p class="size-h2 color-warning">{{ .JSON.Int "duplicates.count" }}</p>
            </div>
          </div>
          <div class="card">
            <div class="card-body">
              <h4 class="color-subdue size-h4">Untagged</h4>
              <p class="size-h2">{{ .JSON.Int "notag.count" }}</p>
            </div>
          </div>
        </div>
      {{ else }}
        <div class="margin-top-10">
          <h4 class="size-h4 margin-bottom-5">Dashboard Stats</h4>
          <ul class="list list-gap-3">
            <li class="list-item">
              <div class="flex justify-between items-center">
                <span class="color-primary">Important</span>
                <span class="text-sm color-muted">{{ .JSON.Int "important.count" }} items</span>
              </div>
            </li>
            <li class="list-item">
              <div class="flex justify-between items-center">
                <span class="color-negative">Broken Links</span>
                <span class="text-sm color-muted">{{ .JSON.Int "broken.count" }} items</span>
              </div>
            </li>
            <li class="list-item">
              <div class="flex justify-between items-center">
                <span class="color-warning">Duplicates</span>
                <span class="text-sm color-muted">{{ .JSON.Int "duplicates.count" }} items</span>
              </div>
            </li>
            <li class="list-item">
              <div class="flex justify-between items-center">
                <h4 class="color-subdue size-h4">Untagged</h4>
                <span class="text-sm color-muted">{{ .JSON.Int "notag.count" }} items</span>
              </div>
            </li>
          </ul>
        </div>
      {{ end }}

      {{ if $show_tags }}
      <hr class="margin-block-15">
      <!-- Tags Distribution -->
      <div class="margin-top-10">
        <h4 class="size-h4 margin-bottom-5">Top Tags</h4>
        <ul class="list list-gap-3">
          {{ $tags := .JSON.Array "tags" }}
          {{ range $tags }}
            {{ $tagName := .String "_id" }}
            {{ $tagCount := .Int "count" }}
            <li class="list-item">
              <div class="flex justify-between items-center">
                <span class="color-highlight">#{{ $tagName }}</span>
                <div class="flex items-center gap-2">
                  <span class="text-sm color-muted">{{ $tagCount }} items</span>
                  <a href="?tag={{ $tagName }}" class="text-sm">View</a>
                </div>
              </div>
            </li>
          {{ end }}
        </ul>
      </div>
      {{ end}}

      <!-- Content Types -->
      {{ if $show_conten_types }}
      <hr class="margin-block-15">
      <div class="margin-top-10">
        <h4 class="size-h4 margin-bottom-5">Content Types</h4>
        <ul class="list list-gap-3">
          {{ range .JSON.Array "types" }}
            <li class="list-item">
              <div class="flex justify-between items-center">
                <span>{{ .String "_id" }}</span>
                <span class="text-sm color-muted">{{ .Int "count" }} items</span>
              </div>
            </li>
          {{ end }}
        </ul>
      </div>
      {{ end }}

